open_checkpoint ../build/synth_1.dcp

set_property HD.RECONFIGURABLE 1 [get_cells design_1_i/kernel3_0/inst]

create_pblock dynamic_region
resize_pblock dynamic_region -add {
    URAM288_X0Y16:URAM288_X4Y127 SYSMONE4_X0Y1:SYSMONE4_X0Y1 RAMB36_X12Y48:RAMB36_X13Y95 RAMB36_X0Y12:RAMB36_X11Y95 RAMB18_X12Y96:RAMB18_X13Y191 RAMB18_X0Y24:RAMB18_X11Y191 PCIE4CE4_X0Y1:PCIE4CE4_X0Y1 PCIE40E4_X0Y0:PCIE40E4_X0Y0 LAGUNA_X28Y240:LAGUNA_X31Y359 LAGUNA_X0Y0:LAGUNA_X27Y359 ILKNE4_X1Y1:ILKNE4_X1Y1 ILKNE4_X0Y0:ILKNE4_X0Y0 HARD_SYNC_X24Y8:HARD_SYNC_X27Y15 HARD_SYNC_X0Y2:HARD_SYNC_X23Y15 GTYE4_COMMON_X1Y4:GTYE4_COMMON_X1Y7 GTYE4_COMMON_X0Y1:GTYE4_COMMON_X0Y7 GTYE4_CHANNEL_X1Y16:GTYE4_CHANNEL_X1Y31 GTYE4_CHANNEL_X0Y4:GTYE4_CHANNEL_X0Y31 DSP48E2_X30Y90:DSP48E2_X31Y185 DSP48E2_X0Y18:DSP48E2_X29Y185 CONFIG_SITE_X0Y1:CONFIG_SITE_X0Y1 CMACE4_X0Y0:CMACE4_X0Y4 CFGIO_SITE_X0Y1:CFGIO_SITE_X0Y1 BUFG_GT_SYNC_X1Y60:BUFG_GT_SYNC_X1Y119 BUFG_GT_SYNC_X0Y15:BUFG_GT_SYNC_X0Y119 BUFG_GT_X1Y96:BUFG_GT_X1Y191 BUFG_GT_X0Y24:BUFG_GT_X0Y191 SLICE_X227Y240:SLICE_X232Y479 SLICE_X226Y300:SLICE_X226Y479 SLICE_X225Y300:SLICE_X225Y419 SLICE_X216Y240:SLICE_X224Y479 SLICE_X215Y300:SLICE_X215Y479 SLICE_X214Y300:SLICE_X214Y419 SLICE_X206Y240:SLICE_X213Y479 SLICE_X195Y60:SLICE_X205Y479 SLICE_X194Y300:SLICE_X194Y419 SLICE_X194Y60:SLICE_X194Y179 SLICE_X183Y60:SLICE_X193Y479 SLICE_X182Y300:SLICE_X182Y419 SLICE_X182Y60:SLICE_X182Y179 SLICE_X165Y60:SLICE_X181Y479 SLICE_X164Y300:SLICE_X164Y419 SLICE_X164Y60:SLICE_X164Y179 SLICE_X153Y60:SLICE_X163Y479 SLICE_X152Y300:SLICE_X152Y419 SLICE_X152Y60:SLICE_X152Y179 SLICE_X140Y60:SLICE_X151Y479 SLICE_X139Y300:SLICE_X139Y419 SLICE_X139Y60:SLICE_X139Y179 SLICE_X125Y60:SLICE_X138Y479 SLICE_X124Y300:SLICE_X124Y419 SLICE_X124Y60:SLICE_X124Y179 SLICE_X118Y60:SLICE_X123Y479 SLICE_X112Y60:SLICE_X116Y479 SLICE_X111Y300:SLICE_X111Y419 SLICE_X111Y60:SLICE_X111Y179 SLICE_X98Y60:SLICE_X110Y479 SLICE_X97Y300:SLICE_X97Y419 SLICE_X97Y60:SLICE_X97Y179 SLICE_X86Y60:SLICE_X96Y479 SLICE_X85Y300:SLICE_X85Y419 SLICE_X85Y60:SLICE_X85Y179 SLICE_X64Y60:SLICE_X84Y479 SLICE_X63Y300:SLICE_X63Y419 SLICE_X63Y60:SLICE_X63Y179 SLICE_X51Y60:SLICE_X62Y479 SLICE_X50Y300:SLICE_X50Y419 SLICE_X50Y60:SLICE_X50Y179 SLICE_X38Y60:SLICE_X49Y479 SLICE_X37Y300:SLICE_X37Y419 SLICE_X37Y60:SLICE_X37Y179 SLICE_X20Y60:SLICE_X36Y479 SLICE_X19Y300:SLICE_X19Y419 SLICE_X19Y60:SLICE_X19Y179 SLICE_X9Y60:SLICE_X18Y479 SLICE_X8Y300:SLICE_X8Y419 SLICE_X8Y60:SLICE_X8Y179 SLICE_X0Y60:SLICE_X7Y479
}
add_cells_to_pblock dynamic_region [get_cells design_1_i/kernel3_0/inst]

opt_design
place_design
phys_opt_design
write_checkpoint shell_placed.dcp
route_design
phys_opt_design
write_checkpoint shell_routed.dcp
write_abstract_shell abs_shell.dcp -cell design_1_i/kernel3_0/inst
write_bitstream full_shell.bit

close_design
open_checkpoint abs_shell.dcp

set prohibited_sites get_sites -filter {PROHIBIT == 1}

set_property HD.RECONFIGURABLE 0 [get_cells design_1_i/kernel3_0/inst]

set_property IS_SOFT 0 [get_pblocks dynamic_region]
set_property CONTAIN_ROUTING 1 [get_pblocks dynamic_region]
set_property EXCLUDE_PLACEMENT 1 [get_pblocks dynamic_region]

set_property PROHIBIT 1 [get_sites ${prohibited_sites}]

write_checkpoint abs_shell_place.dcp
